{% extends 'base.html' %}
{% load static %}


{% block title %}
    Home
{% endblock title %}



{% block body %}
    
		<!--start page wrapper -->
		<div class="page-wrapper">
			<div class="page-content">
				<div class="row row-cols-1 row-cols-md-2 row-cols-xl-4">
                   <div class="col">
					 <div class="card radius-10 border-start border-0 border-4 border-info">
						<div class="card-body">
							<div class="d-flex align-items-center">
								<div>
									<p class="mb-0 text-secondary">Total Crimes</p>
									<h4 class="my-1 text-info">{{ data_count }}</h4>
								</div>
								<div class="widgets-icons-2 rounded-circle bg-gradient-blues text-white ms-auto"><i class='bx bxs-cart'></i>
								</div>
							</div>
						</div>
					 </div>
				   </div>
				   <div class="col">
					<div class="card radius-10 border-start border-0 border-4 border-danger">
					   <div class="card-body">
						   <div class="d-flex align-items-center">
							   <div>
								   <p class="mb-0 text-secondary">Used Samples</p>
								   <h4 class="my-1 text-danger">{{cleaned_crimes_count}}</h4>
							   </div>
							   <div class="widgets-icons-2 rounded-circle bg-gradient-burning text-white ms-auto"><i class='bx bxs-wallet'></i>
							   </div>
						   </div>
					   </div>
					</div>
				  </div>
				  <div class="col">
					<div class="card radius-10 border-start border-0 border-4 border-success">
					   <div class="card-body">
						   <div class="d-flex align-items-center">
							   <div>
								   <p class="mb-0 text-secondary">Accuracy</p>
								   <h4 class="my-1 text-success">80 %</h4>
							   </div>
							   <div class="widgets-icons-2 rounded-circle bg-gradient-ohhappiness text-white ms-auto"><i class='bx bxs-bar-chart-alt-2' ></i>
							   </div>
						   </div>
					   </div>
					</div>
				  </div>
				  <div class="col">
					<div class="card radius-10 border-start border-0 border-4 border-warning">
					   <div class="card-body">
						   <div class="d-flex align-items-center">
							   <div>
								   <p class="mb-0 text-secondary">Total Customers</p>
								   <h4 class="my-1 text-warning">8.4K</h4>
							   </div>
							   <div class="widgets-icons-2 rounded-circle bg-gradient-orange text-white ms-auto"><i class='bx bxs-group'></i>
							   </div>
						   </div>
					   </div>
					</div>
				  </div> 
				</div><!--end row-->

				<div class="row">
                   <div class="col-12 col-lg-8 d-flex">
                      <div class="card radius-10 w-100">
						<div class="card-header">
							<div class="d-flex align-items-center">
								<div>
									<h6 class="mb-0">Crime Types</h6>
								</div>
								
							</div>
						</div>
						  <div class="card-body">
							<div class="d-flex align-items-center ms-auto font-13 gap-2 mb-3">
								<span class="border px-1 rounded cursor-pointer"><i class="bx bxs-circle me-1" style="color: #14abef"></i>Sales</span>
								<span class="border px-1 rounded cursor-pointer"><i class="bx bxs-circle me-1" style="color: #ffc107"></i>Visits</span>
							</div>
							<div class="">
								<img src="data:image/png;base64,{{ crime_type_count_plot }}" alt="" width="100%">
							  </div>
						  </div>
						  
					  </div>
				   </div>
				   <div class="col-12 col-lg-4 d-flex">
                       <div class="card radius-10 w-100">
						<div class="card-header">
							<div class="d-flex align-items-center">
								<div>
									<h6 class="mb-0">Zones</h6>
								</div>
							</div>
						</div>
						  <div class="card-body">
							<img src="data:image/png;base64,{{ zone_count_plot }}" alt="" width="100%">

					   </div>
				   </div>
				</div><!--end row-->

				 <div class="card radius-10">
					<div class="card-header">
						<div class="d-flex align-items-center">
							<div>
								<h6 class="mb-0">Recent Training</h6>
							</div>
							<div class="dropdown ms-auto">
								<a class="dropdown-toggle dropdown-toggle-nocaret" href="#" data-bs-toggle="dropdown"><i class='bx bx-dots-horizontal-rounded font-22 text-option'></i>
								</a>
								
							</div>
						</div>
					</div>
                        
					<div class="row">
						<div class="col-12 col-lg-12 col-xl-12 d-flex">
						  <div class="card radius-10 w-100">
							<div class="card-header bg-transparent">
								<div class="d-flex align-items-center">
									<div>
										<h6 class="mb-0">Recent Training</h6>
									</div>
									
								</div>
							   </div>
							 <div class="card-body">
								<div class="row">
								  <div class="col-lg-12 col-xl-12 border-end">
									 <div class="row">
										<div class="col-6 col-lg-6">
											<img src="data:image/png;base64,{{latest_training_plot.kmeans_plot }} " alt="" class="img-fluid rounded" width="100%">
										</div>
										<div class="col-6 col-lg-6">
											<img src="data:image/png;base64,{{latest_training_plot.dbscan_plot }} " alt="" class="img-fluid rounded" width="100%">
										</div>
									 </div>
								  </div>
								  

								  </div>
								</div>
							 </div>
						   </div>
						</div>
			   
						
					 </div><!--end row-->

					 
					 </div><!--end row-->
			</div>

			<div class="card">
				<div class="card-body">
					<div class="table-responsive">
						<div id="example2_wrapper" class="dataTables_wrapper dt-bootstrap5"><div class="row"><div class="col-sm-12 col-md-6"><div class="dt-buttons btn-group">      <button class="btn btn-outline-secondary buttons-copy buttons-html5" tabindex="0" aria-controls="example2" type="button"><span>Copy</span></button> <button class="btn btn-outline-secondary buttons-excel buttons-html5" tabindex="0" aria-controls="example2" type="button"><span>Excel</span></button> <button class="btn btn-outline-secondary buttons-pdf buttons-html5" tabindex="0" aria-controls="example2" type="button"><span>PDF</span></button> <button class="btn btn-outline-secondary buttons-print" tabindex="0" aria-controls="example2" type="button"><span>Print</span></button> </div></div><div class="col-sm-12 col-md-6"><div id="example2_filter" class="dataTables_filter"><label>Search:<input type="search" class="form-control form-control-sm" placeholder="" aria-controls="example2"></label></div></div></div><div class="row"><div class="col-sm-12"><table id="example2" class="table table-striped table-bordered dataTable" role="grid" aria-describedby="example2_info">
							<thead>
								<tr role="row">
									<th class="sorting_asc" tabindex="0" aria-controls="example2" rowspan="1" colspan="1" aria-sort="ascending"
										aria-label="Name: activate to sort column descending" style="width: 269.797px;">Case Number</th>
									<th class="sorting" tabindex="0" aria-controls="example2" rowspan="1" colspan="1"
										aria-label="Position: activate to sort column ascending" style="width: 430.672px;">Date</th>
									<th class="sorting" tabindex="0" aria-controls="example2" rowspan="1" colspan="1"
										aria-label="Office: activate to sort column ascending" style="width: 198.75px;">Block</th>
									<th class="sorting" tabindex="0" aria-controls="example2" rowspan="1" colspan="1"
										aria-label="Age: activate to sort column ascending" style="width: 100.531px;">IUCR</th>
									<th class="sorting" tabindex="0" aria-controls="example2" rowspan="1" colspan="1"
										aria-label="Start date: activate to sort column ascending" style="width: 187px;">Primary Type</th>
									<th class="sorting" tabindex="0" aria-controls="example2" rowspan="1" colspan="1"
										aria-label="Salary: activate to sort column ascending" style="width: 154.25px;">Arrest</th>
								</tr>
							</thead>
							<tbody>
							
							
							{% for crime in latest_crimes %}
							
							{% if crime.id|divisibleby:2 %}
							<tr role="row" class="odd">
							{% else %}
							<tr role="row" class="even">
							{% endif %}
								<td class="sorting_1">{{crime.case_number}}</td>
								<td>{{crime.date}}</td>
								<td>{{crime.block}}</td>
								<td>{{crime.iucr}}</td>
								<td>{{crime.primary_type}}</td>
								<td>{{crime.arrest}}</td>
							</tr>
							{% endfor %}
								
							</tbody>
							<tfoot>
								<tr><th rowspan="1" colspan="1">Name</th><th rowspan="1" colspan="1">Position</th><th rowspan="1" colspan="1">Office</th><th rowspan="1" colspan="1">Age</th><th rowspan="1" colspan="1">Start date</th><th rowspan="1" colspan="1">Salary</th></tr>
							</tfoot>
						</table></div></div><div class="row"><div class="col-sm-12 col-md-5"><div class="dataTables_info" id="example2_info" role="status" aria-live="polite">Showing 1 to 10 of 57 entries</div></div><div class="col-sm-12 col-md-7"><div class="dataTables_paginate paging_simple_numbers" id="example2_paginate"><ul class="pagination"><li class="paginate_button page-item previous disabled" id="example2_previous"><a href="#" aria-controls="example2" data-dt-idx="0" tabindex="0" class="page-link">Prev</a></li><li class="paginate_button page-item active"><a href="#" aria-controls="example2" data-dt-idx="1" tabindex="0" class="page-link">1</a></li><li class="paginate_button page-item "><a href="#" aria-controls="example2" data-dt-idx="2" tabindex="0" class="page-link">2</a></li><li class="paginate_button page-item "><a href="#" aria-controls="example2" data-dt-idx="3" tabindex="0" class="page-link">3</a></li><li class="paginate_button page-item "><a href="#" aria-controls="example2" data-dt-idx="4" tabindex="0" class="page-link">4</a></li><li class="paginate_button page-item "><a href="#" aria-controls="example2" data-dt-idx="5" tabindex="0" class="page-link">5</a></li><li class="paginate_button page-item "><a href="#" aria-controls="example2" data-dt-idx="6" tabindex="0" class="page-link">6</a></li><li class="paginate_button page-item next" id="example2_next"><a href="#" aria-controls="example2" data-dt-idx="7" tabindex="0" class="page-link">Next</a></li></ul></div></div></div></div>
					</div>
				</div>
			</div>
		</div>
		<!--end page wrapper -->
		
{% endblock body %}
    